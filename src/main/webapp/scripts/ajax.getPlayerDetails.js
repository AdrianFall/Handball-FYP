$('#modalPlayerDetails').on('hidden.bs.modal', function(e) {
		// Clean the animation queue
		$('#physicalSectionLabel').stop().fadeOut(1);
		$('#physicalLine').stop().fadeOut(1);

	

		$('#sprintSpeedLabel').stop().fadeOut(1);
		$('#sprintSpeedText').stop().fadeOut(1);
		$('#sprintSpeedBlock').stop().fadeOut(1);

		$('#jumpingLabel').stop().fadeOut(1);
		$('#jumpingText').stop().fadeOut(1);
		$('#jumpingBlock').stop().fadeOut(1);
		
		$('#balanceLabel').stop().fadeOut(1);
		$('#balanceText').stop().fadeOut(1);
		$('#balanceBlock').stop().fadeOut(1);
		
		$('#agilityLabel').stop().fadeOut(1);
		$('#agilityText').stop().fadeOut(1);
		$('#agilityBlock').stop().fadeOut(1);
		
		$('#staminaLabel').stop().fadeOut(1);
		$('#staminaText').stop().fadeOut(1);
		$('#staminaBlock').stop().fadeOut(1);
		
		$('#strengthLabel').stop().fadeOut(1);
		$('#strengthText').stop().fadeOut(1);
		$('#strengthBlock').stop().fadeOut(1);
		
		
		
		$('#blockingLabel').stop().fadeOut(1);
		$('#blockingText').stop().fadeOut(1);
		$('#blockingBlock').stop().fadeOut(1);
		
		$('#mentalSectionLabel').stop().fadeOut(1);
		$('#mentalLine').stop().fadeOut(1);
		
		$('#aggressionLabel').stop().fadeOut(1);
		$('#aggressionText').stop().fadeOut(1);
		$('#aggressionBlock').stop().fadeOut(1);
		
		$('#interceptionsLabel').stop().fadeOut(1);
		$('#interceptionsText').stop().fadeOut(1);
		$('#interceptionsBlock').stop().fadeOut(1);
		
		$('#attack_positionLabel').stop().fadeOut(1);
		$('#attack_positionText').stop().fadeOut(1);
		$('#attack_positionBlock').stop().fadeOut(1);
		
		$('#visionLabel').stop().fadeOut(1);
		$('#visionText').stop().fadeOut(1);
		$('#visionBlock').stop().fadeOut(1);
		
		$('#creativityLabel').stop().fadeOut(1);
		$('#creativityText').stop().fadeOut(1);
		$('#creativityBlock').stop().fadeOut(1);
		
		$('#technicalSectionLabel').stop().fadeOut(1);
		$('#technicalLine').stop().fadeOut(1);
		
		$('#ball_controlLabel').stop().fadeOut(1);
		$('#ball_controlText').stop().fadeOut(1);
		$('#ball_controlBlock').stop().fadeOut(1);
		
		$('#long_shotsLabel').stop().fadeOut(1);
		$('#long_shotsText').stop().fadeOut(1);
		$('#long_shotsBlock').stop().fadeOut(1);
		
		$('#fk_accuracyLabel').stop().fadeOut(1);
		$('#fk_accuracyText').stop().fadeOut(1);
		$('#fk_accuracyBlock').stop().fadeOut(1);
		
		$('#shot_powerLabel').stop().fadeOut(1);
		$('#shot_powerText').stop().fadeOut(1);
		$('#shot_powerBlock').stop().fadeOut(1);
		
		$('#dribblingLabel').stop().fadeOut(1);
		$('#dribblingText').stop().fadeOut(1);
		$('#dribblingBlock').stop().fadeOut(1);
		
		$('#short_passingLabel').stop().fadeOut(1);
		$('#short_passingText').stop().fadeOut(1);
		$('#short_passingBlock').stop().fadeOut(1);
		
		$('#long_passingLabel').stop().fadeOut(1);
		$('#long_passingText').stop().fadeOut(1);
		$('#long_passingBlock').stop().fadeOut(1);
		
		$('#stand_tacklesLabel').stop().fadeOut(1);
		$('#stand_tacklesText').stop().fadeOut(1);
		$('#stand_tacklesBlock').stop().fadeOut(1);
		
		$('#markingLabel').stop().fadeOut(1);
		$('#markingText').stop().fadeOut(1);
		$('#markingBlock').stop().fadeOut(1);
		
		$('#penaltiesLabel').stop().fadeOut(1);
		$('#penaltiesText').stop().fadeOut(1);
		$('#penaltiesBlock').stop().fadeOut(1);
		
		$('#curveLabel').stop().fadeOut(1);
		$('#curveText').stop().fadeOut(1);
		$('#curveBlock').stop().fadeOut(1);
		
		$('#finishingLabel').stop().fadeOut(1);
		$('#finishingText').stop().fadeOut(1);
		$('#finishingBlock').stop().fadeOut(1);
		
		$('#six_m_shotsLabel').stop().fadeOut(1);
		$('#six_m_shotsText').stop().fadeOut(1);
		$('#six_m_shotsBlock').stop().fadeOut(1);
		
		$('#lob_shotsLabel').stop().fadeOut(1);
		$('#lob_shotsText').stop().fadeOut(1);
		$('#lob_shotsBlock').stop().fadeOut(1);
		  
		$('#nine_m_shotsLabel').stop().fadeOut(1);
		$('#nine_m_shotsText').stop().fadeOut(1);
		$('#nine_m_shotsBlock').stop().fadeOut(1);
		
		$('#goalKeepingSectionLabel').stop().fadeOut(1);
		$('#goalKeepingLine').stop().fadeOut(1);

		$('#reflexesLabel').stop().fadeOut(1);
		$('#reflexesText').stop().fadeOut(1);
		$('#reflexesBlock').stop().fadeOut(1);
		
		$('#handlingLabel').stop().fadeOut(1);
		$('#handlingText').stop().fadeOut(1);
		$('#handlingBlock').stop().fadeOut(1);
		
		$('#positioningLabel').stop().fadeOut(1);
		$('#positioningText').stop().fadeOut(1);
		$('#positioningBlock').stop().fadeOut(1);
		
		$('#leg_savesLabel').stop().fadeOut(1);
		$('#leg_savesText').stop().fadeOut(1);
		$('#leg_savesBlock').stop().fadeOut(1);
		
		$('#penalty_savesLabel').stop().fadeOut(1);
		$('#penalty_savesText').stop().fadeOut(1);
		$('#penalty_savesBlock').stop().fadeOut(1);
		
		$('#six_m_savesLabel').stop().fadeOut(1);
		$('#six_m_savesText').stop().fadeOut(1);
		$('#six_m_savesBlock').stop().fadeOut(1);
		
		$('#nine_m_savesLabel').stop().fadeOut(1);
		$('#nine_m_savesText').stop().fadeOut(1);
		$('#nine_m_savesBlock').stop().fadeOut(1);
		
		$('#communicationLabel').stop().fadeOut(1);
		$('#communicationText').stop().fadeOut(1);
		$('#communicationBlock').stop().fadeOut(1);
		
		$('#anglesLabel').stop().fadeOut(1);
		$('#anglesText').stop().fadeOut(1);
		$('#anglesBlock').stop().fadeOut(1);
		
		$('#catchingLabel').stop().fadeOut(1);
		$('#catchingText').stop().fadeOut(1);
		$('#catchingBlock').stop().fadeOut(1);

		$('#passingLabel').stop().fadeOut(1);
		$('#passingText').stop().fadeOut(1);
		$('#passingBlock').stop().fadeOut(1);
		
		$('#physicalSectionLabel').removeClass('animated bounceIn');
		
		$('#mentalSectionLabel').removeClass('animated bounceIn');
		
		
		$('#technicalSectionLabel').removeClass('animated bounceIn');
		
		
		$('#goalKeepingSectionLabel').removeClass('animated bounceIn');
		

	});

// Obtain and display the player details on the modal
function showPlayerDetailsOnModal(playerId, playerPosition) {
	
	
	


	

	// AJAX post for player skills
	$.ajax({ 
				type : "POST",
				url : "getPlayerDetails.html",
				data : JSON.stringify({
					"playerId" : playerId
				}),
				contentType : "application/json; charset=UTF-8",
				success : function(data) {

					var parsedDataJSON = $.parseJSON(data);
					if (parsedDataJSON.status == "OK") {
					
						// Set the player details
						$('#height').html(parsedDataJSON.height);
						$('#weight').html(parsedDataJSON.weight);
						$('#handed').html(parsedDataJSON.handed);
						$('#specialAbility').html(parsedDataJSON.special_ability);
						
						// Set the contract details
						$('#seasonWage').html("$" + parsedDataJSON.season_wage);
						$('#marketValue').html("$" + parsedDataJSON.market_value);
						$('#yearsLeft').html(parsedDataJSON.years_left + " years left at " + parsedDataJSON.team_name);
					
						// Set the health details
						$('#conditionProgressBar').data("perc", parsedDataJSON.condition);
						$('#moraleProgressBar').data("perc", parsedDataJSON.morale);
						if (parsedDataJSON.injury_days == 0) {
							$('#injuryCause').html("The player is in good shape");
							$('#hireDoctorButton').fadeOut(500);
							$('#hireDoctorText').fadeOut(500);
						} else {
							$('#injuryCause').html(parsedDataJSON.injury + " for " + parsedDataJSON.injury_days + " days.");
							$('#hireDoctorButton').fadeIn(500);
							$('#hireDoctorText').fadeIn(500);
						}
						
						

						

						// Call function to load the progress bar
						preload();
						
						
						
						if (new String(playerPosition).valueOf() != new String(
								"GK").valueOf()) {
							
								
							
							
							// Set the label divs style to display none, to
							// properly
							// animate the fade in
							
							
							$('#physicalSectionLabel').css({
								'-webkit-animation-duration': '3s',
								  '-webkit-animation-delay': '0s',
							'-moz-animation-duration': '3s',
							  '-moz-animation-delay': '0s',
							'-ms-animation-duration': '3s',
							  '-ms-animation-delay': '0s',
							});

							$('#mentalSectionLabel').css({
								'-webkit-animation-duration': '3s',
								  '-webkit-animation-delay': '1s',
							'-moz-animation-duration': '3s',
							  '-moz-animation-delay': '1s',
							'-ms-animation-duration': '3s',
							  '-ms-animation-delay': '1s',
							});

							$('#technicalSectionLabel').css({
								'-webkit-animation-duration': '3s',
								  '-webkit-animation-delay': '2.2s',
							'-moz-animation-duration': '3s',
							  '-moz-animation-delay': '2.2s',
							'-ms-animation-duration': '3s',
							  '-ms-animation-delay': '2.2s',
							});
							
							$('#goalKeepingSectionLabel').css({
								'-webkit-animation-duration': '3s',
								  '-webkit-animation-delay': '0.2s',
							'-moz-animation-duration': '3s',
							  '-moz-animation-delay': '0.2s',
							'-ms-animation-duration': '3s',
							  '-ms-animation-delay': '0.2s',
							});



							$('#physicalSectionLabel').fadeIn(850);
							$('#physicalLine').fadeIn(1050);
							$('#physicalSectionLabel').addClass('animated bounceIn');

							var sprintSpeedQuality = parsedDataJSON.sprint_speed;
							var sprintSpeedPercentage = parsedDataJSON.sprint_speed_quality_perc;
							$('#sprintSpeedLabel').fadeIn(2150);
							$('#sprintSpeedBlock').css('background',
									obtainColor(sprintSpeedPercentage));
							$('#sprintSpeedText').html(sprintSpeedQuality);
							$('#sprintSpeedText').fadeIn(2400);
							$('#sprintSpeedBlock').fadeIn(2400);

							var jumpingQuality = parsedDataJSON.jumping;
							var jumpingPercentage = parsedDataJSON.jumping_quality_perc;
							$('#jumpingLabel').fadeIn(2600);
							$('#jumpingBlock').css('background',
									obtainColor(jumpingPercentage));
							$('#jumpingText').html(jumpingQuality);
							$('#jumpingText').fadeIn(2800);
							$('#jumpingBlock').fadeIn(2800);

							var balanceQuality = parsedDataJSON.balance;
							var balancePercentage = parsedDataJSON.balance_quality_perc;
							$('#balanceLabel').fadeIn(2800);
							$('#balanceBlock').css('background',
									obtainColor(balancePercentage));
							$('#balanceText').html(balanceQuality);
							$('#balanceText').fadeIn(2800);
							$('#balanceBlock').fadeIn(3000);

							

							var staminaQuality = parsedDataJSON.stamina;
							var staminaPercentage = parsedDataJSON.stamina_quality_perc;
							$('#staminaLabel').fadeIn(3200);
							$('#staminaBlock').css('background',
									obtainColor(staminaPercentage));
							$('#staminaText').html(staminaQuality);
							$('#staminaText').fadeIn(3200);
							$('#staminaBlock').fadeIn(3400);

							var strengthQuality = parsedDataJSON.strength;
							var strengthPercentage = parsedDataJSON.strength_quality_perc;
							$('#strengthLabel').fadeIn(3400);
							$('#strengthBlock').css('background',
									obtainColor(strengthPercentage));
							$('#strengthText').html(strengthQuality);
							$('#strengthText').fadeIn(3400);
							$('#strengthBlock').fadeIn(3600);

						

							var blockingQuality = parsedDataJSON.blocking;
							var blockingPercentage = parsedDataJSON.blocking_quality_perc;
							$('#blockingLabel').fadeIn(3800);
							$('#blockingBlock').css('background',
									obtainColor(blockingPercentage));
							$('#blockingText').html(blockingQuality);
							$('#blockingText').fadeIn(4000);
							$('#blockingBlock').fadeIn(4000);

						

							$('#mentalSectionLabel').fadeIn(4200);
							$('#mentalLine').fadeIn(4400);
							$('#mentalSectionLabel').addClass('animated bounceIn');
							
							var aggressionQuality = parsedDataJSON.aggression;
							var aggressionPercentage = parsedDataJSON.aggression_quality_perc;
							$('#aggressionLabel').fadeIn(4400);
							$('#aggressionBlock').css('background',
									obtainColor(aggressionPercentage));
							$('#aggressionText').html(aggressionQuality);
							$('#aggressionText').fadeIn(4400);
							$('#aggressionBlock').fadeIn(4600);
							
							
							var attack_positionQuality = parsedDataJSON.attack_position;
							var attack_positionPercentage = parsedDataJSON.attack_position_quality_perc;
							$('#attack_positionLabel').fadeIn(4800);
							$('#attack_positionBlock').css('background',
									obtainColor(attack_positionPercentage));
							$('#attack_positionText').html(attack_positionQuality);
							$('#attack_positionText').fadeIn(4800);
							$('#attack_positionBlock').fadeIn(5000);
							
							var visionQuality = parsedDataJSON.vision;
							var visionPercentage = parsedDataJSON.vision_quality_perc;
							$('#visionLabel').fadeIn(5000);
							$('#visionBlock').css('background',
									obtainColor(visionPercentage));
							$('#visionText').html(visionQuality);
							$('#visionText').fadeIn(5000);
							$('#visionBlock').fadeIn(5200);
							
							var creativityQuality = parsedDataJSON.creativity;
							var creativityPercentage = parsedDataJSON.creativity_quality_perc;
							$('#creativityLabel').fadeIn(5200);
							$('#creativityBlock').css('background',
									obtainColor(creativityPercentage));
							$('#creativityText').html(creativityQuality);
							$('#creativityText').fadeIn(5200);
							$('#creativityBlock').fadeIn(5400);
							
							$('#technicalSectionLabel').fadeIn(5400);
							$('#technicalLine').fadeIn(5600);
							$('#technicalSectionLabel').addClass('animated bounceIn');
							
							var catchingQuality = parsedDataJSON.catching;
							var catchingPercentage = parsedDataJSON.catching_quality_perc;
							$('#catchingLabel').fadeIn(5400);
							$('#catchingBlock').css('background',
									obtainColor(catchingPercentage));
							$('#catchingText').html(catchingQuality);
							$('#catchingText').fadeIn(5400);
							$('#catchingBlock').fadeIn(5600);
							
							
							var shot_powerQuality = parsedDataJSON.shot_power;
							var shot_powerPercentage = parsedDataJSON.shot_power_quality_perc;
							$('#shot_powerLabel').fadeIn(6000);
							$('#shot_powerBlock').css('background',
									obtainColor(shot_powerPercentage));
							$('#shot_powerText').html(shot_powerQuality);
							$('#shot_powerText').fadeIn(6000);
							$('#shot_powerBlock').fadeIn(6200);
							
							var dribblingQuality = parsedDataJSON.dribbling;
							var dribblingPercentage = parsedDataJSON.dribbling_quality_perc;
							$('#dribblingLabel').fadeIn(6200);
							$('#dribblingBlock').css('background',
									obtainColor(dribblingPercentage));
							$('#dribblingText').html(dribblingQuality);
							$('#dribblingText').fadeIn(6200);
							$('#dribblingBlock').fadeIn(6400);
							
							var passingQuality = parsedDataJSON.passing;
							var passingPercentage = parsedDataJSON.passing_quality_perc;
							$('#passingLabel').fadeIn(6400);
							$('#passingBlock').css('background',
									obtainColor(passingPercentage));
							$('#passingText').html(passingQuality);
							$('#passingText').fadeIn(6400);
							$('#passingBlock').fadeIn(6600);
							
							var penaltiesQuality = parsedDataJSON.penalties;
							var penaltiesPercentage = parsedDataJSON.penalties_quality_perc;
							$('#penaltiesLabel').fadeIn(6800);
							$('#penaltiesBlock').css('background',
									obtainColor(penaltiesPercentage));
							$('#penaltiesText').html(penaltiesQuality);
							$('#penaltiesText').fadeIn(6800);
							$('#penaltiesBlock').fadeIn(7000);
							
							var curveQuality = parsedDataJSON.curve;
							var curvePercentage = parsedDataJSON.curve_quality_perc;
							$('#curveLabel').fadeIn(6800);
							$('#curveBlock').css('background',
									obtainColor(curvePercentage));
							$('#curveText').html(curveQuality);
							$('#curveText').fadeIn(6800);
							$('#curveBlock').fadeIn(7000);
							
							var finishingQuality = parsedDataJSON.finishing;
							var finishingPercentage = parsedDataJSON.finishing_quality_perc;
							$('#finishingLabel').fadeIn(6800);
							$('#finishingBlock').css('background',
									obtainColor(finishingPercentage));
							$('#finishingText').html(finishingQuality);
							$('#finishingText').fadeIn(6800);
							$('#finishingBlock').fadeIn(7000);
							
							var six_m_shotsQuality = parsedDataJSON.six_m_shots;
							var six_m_shotsPercentage = parsedDataJSON.six_m_shots_quality_perc;
							$('#six_m_shotsLabel').fadeIn(6800);
							$('#six_m_shotsBlock').css('background',
									obtainColor(six_m_shotsPercentage));
							$('#six_m_shotsText').html(six_m_shotsQuality);
							$('#six_m_shotsText').fadeIn(6800);
							$('#six_m_shotsBlock').fadeIn(7000);
							
							
							
							var nine_m_shotsQuality = parsedDataJSON.nine_m_shots;
							var nine_m_shotsPercentage = parsedDataJSON.nine_m_shots_quality_perc;
							$('#nine_m_shotsLabel').fadeIn(6800);
							$('#nine_m_shotsBlock').css('background',
									obtainColor(nine_m_shotsPercentage));
							$('#nine_m_shotsText').html(nine_m_shotsQuality);
							$('#nine_m_shotsText').fadeIn(6800);
							$('#nine_m_shotsBlock').fadeIn(7000);

						} else { // playerPosition == GK
							$('#goalKeepingSectionLabel').fadeIn(850);
							$('#goalKeepingLine').fadeIn(1050);
							$('#goalKeepingSectionLabel').addClass('animated rubberBand');
							
							var reflexesQuality = parsedDataJSON.reflexes;
							var reflexesPercentage = parsedDataJSON.reflexes_quality_perc;
							$('#reflexesLabel').fadeIn(1450);
							$('#reflexesBlock').css('background',
									obtainColor(reflexesPercentage));
							$('#reflexesText').html(reflexesQuality);
							$('#reflexesText').fadeIn(1800);
							$('#reflexesBlock').fadeIn(2200);


							var positioningQuality = parsedDataJSON.positioning;
							var positioningPercentage = parsedDataJSON.positioning_quality_perc;
							$('#positioningLabel').fadeIn(2600);
							$('#positioningBlock').css('background',
									obtainColor(positioningPercentage));
							$('#positioningText').html(positioningQuality);
							$('#positioningText').fadeIn(2800);
							$('#positioningBlock').fadeIn(2800);

							var leg_savesQuality = parsedDataJSON.leg_saves;
							var leg_savesPercentage = parsedDataJSON.leg_saves_quality_perc;
							$('#leg_savesLabel').fadeIn(2800);
							$('#leg_savesBlock').css('background',
									obtainColor(leg_savesPercentage));
							$('#leg_savesText').html(leg_savesQuality);
							$('#leg_savesText').fadeIn(2800);
							$('#leg_savesBlock').fadeIn(3000);

							var penalty_savesQuality = parsedDataJSON.penalty_saves;
							var penalty_savesPercentage = parsedDataJSON.penalty_saves_quality_perc;
							$('#penalty_savesLabel').fadeIn(3000);
							$('#penalty_savesBlock').css('background',
									obtainColor(penalty_savesPercentage));
							$('#penalty_savesText').html(penalty_savesQuality);
							$('#penalty_savesText').fadeIn(3000);
							$('#penalty_savesBlock').fadeIn(3200);

							var six_m_savesQuality = parsedDataJSON.six_m_saves;
							var six_m_savesPercentage = parsedDataJSON.six_m_saves_quality_perc;
							$('#six_m_savesLabel').fadeIn(3200);
							$('#six_m_savesBlock').css('background',
									obtainColor(six_m_savesPercentage));
							$('#six_m_savesText').html(six_m_savesQuality);
							$('#six_m_savesText').fadeIn(3200);
							$('#six_m_savesBlock').fadeIn(3400);

							var nine_m_savesQuality = parsedDataJSON.nine_m_saves;
							var nine_m_savesPercentage = parsedDataJSON.nine_m_saves_quality_perc;
							$('#nine_m_savesLabel').fadeIn(3400);
							$('#nine_m_savesBlock').css('background',
									obtainColor(nine_m_savesPercentage));
							$('#nine_m_savesText').html(nine_m_savesQuality);
							$('#nine_m_savesText').fadeIn(3400);
							$('#nine_m_savesBlock').fadeIn(3600);

							
							
							
						}// END else (playerPosition == GK)
					 
					} else if (parsedDataJSON.status == "sessionExpired")
						alert('Session Expired');
					else if (parsedDataJSON.status == "error")
						alert('error.');
					
				},
				error : function() {
					alert('Error occured when fetching player skills');
					
				}
			}); // END AJAX post for player's skills
}; // END showPlayerDetailsOnModal function

function fade(id, ms) {
	$(id).css({
		display : 'block',
		'-webkit-animation' : 'fadeIn ' + ms + 'ms',
		'-moz-animation' : 'fadeIn ' + ms + 'ms',
		'-o-animation' : 'fadeIn ' + ms + 'ms',
		'-animation' : 'fadeIn ' + ms + 'ms'
	});
}

function obtainColor(perc) {
	var color = '';
	if (perc >= 0 && perc <= 5)
		color = '#B30707';
	else if (perc > 5 && perc <= 15)
		color = '#cb5858';
	else if (perc > 15 && perc <= 30)
		color = '#C9BD3A';
	else if (perc > 30 && perc <= 40)
		color = '#d4ca62';
	else if (perc > 40 && perc <= 50)
		color = '#BEE339';
	else if (perc > 50 && perc <= 65)
		color = '#99E339';
	else if (perc > 65 && perc <= 80)
		color = '#5BE339';
	else if (perc > 80)
		color = '#32F039';
	return color;
}
